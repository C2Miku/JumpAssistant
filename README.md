# JumpAssistant
微信跳一跳游戏辅助程序

## 简介

此程序使用ADB与手机进行交互（包括截图、模拟触摸），然后程序将获取到的截图进行简单的图像处理，分析出小人当前所在的位置坐标和下一个方块的中心点坐标。算法和思路较为简单，有时会出现少许误差，在几次跳跃的调整后，误差会慢慢减小。该程序不算复杂，适合初学者一起学习。后续可能会更新算法，提高精准度。

## 使用方法

**请先安装Java运行环境和喜欢的IDE，以及ADB(Android Debug Bridge)**
1. 将手机连接到电脑（仅限Android手机），打开USB调试，允许此台电脑进行调试；
2. 导入项目（核心文件：```JumpAssitant/src/JumpAssistant.java```，需要的两个类文件在此文件夹下的```Coordinate.java```和```RGB.java```）；
3. 根据自己的情况修改以下常量：
```
ADB_ROUTE        //ADB的所在路径
TEMP_ROUTE       //存储临时截图文件的路径
SCREEN_HEIGHT    //屏幕分辨率高度
SCREEN_WIDTH     //屏幕分辨率宽度
RATIO            //距离与按压时间的系数，不同的分辨率或DPI可能需要尝试着更改
COLOR_DIFF_MAX   //紫色小人的底部左右边缘的颜色允许差值，可能会因为分辨率的不同导致渲染的颜色不同
```

## 实现思路

1. 依赖```java.awt.image.BufferedImage```包，读取图片数据；
2. 主要使用的ADB命令：
```
adb devices  //获取连接的Android设备列表
adb shell screencap  //对手机屏幕进行截图
adb pull  //将手机里的文件（截图）推送到计算机
adb shell rm  //删除手机里的文件（截图）释放空间
adb shell input swipe  //模拟滑动（可以实现模拟长按指定时间的效果）
```
3. 为方便程序中使用和表达清楚，新建了一个平面坐标对象```Coordinate```、一个RGB颜色对象```RGB```以避免出现看起来比较费劲的数组；
4. 比较两个颜色的差距：在方法```GetColorDiff()```中，将两个颜色的RGB值分别作差求绝对值并相加；
5. 获取紫色小人的坐标：在1080P的设备上取到的小人底部左右两侧的颜色为(43,43,73)(60,56,83)，分辨率不同的设备可能会导致渲染出的颜色不同，可以适当修改```COLOR_DIFF_MAX```来允许颜色误差。然后将获得的底部左右两端坐标取平均，即是小人当前的坐标；
